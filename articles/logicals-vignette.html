<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="extraoperators">
<!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light">
<script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/5/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Logical Operators • extraoperators</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Logical Operators">
<meta property="og:description" content="extraoperators">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@WileyResearch">
<meta name="twitter:site" content="https://joshuawiley.com">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/5/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/5/darkly/bootstrap.css" media="(prefers-color-scheme: dark)">
<!-- preferably CSS --><link rel="stylesheet" href="../preferably.css">
<link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">extraoperators</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/logicals-vignette.html">Logical Operators</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/JWiley/extraoperators/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>

        
        
        
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Logical Operators</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JWiley/extraoperators/blob/HEAD/vignettes/logicals-vignette.Rmd" class="external-link"><code>vignettes/logicals-vignette.Rmd</code></a></small>
      <div class="d-none name"><code>logicals-vignette.Rmd</code></div>
    </div>

    
    
<p>To start, load the package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://joshuawiley.com/extraoperators/">extraoperators</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="logical-comparisons">Logical Comparisons<a class="anchor" aria-label="anchor" href="#logical-comparisons"></a>
</h2>
<p>This section covers basic logical comparisons and shows how they
might be done in base <code>R</code> versus using the
<code>extraoperators</code> package. Many of these are quite simple, but
are defined so that later operators are possible.</p>
<p>First let’s define our “data” as some numbers stored in
<code>sample_numbers</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">sample_numbers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">10</span>, <span class="fl">99</span><span class="op">)</span></span></code></pre></div>
<p>Now we can do a series of simple logical comparisons which return a
logical vector of <code>TRUE</code> or <code>FALSE</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## base R: greater than 3?</span></span>
<span><span class="va">sample_numbers</span> <span class="op">&gt;</span> <span class="fl">3</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE</span></span>
<span></span>
<span><span class="co">## base R: greater than or equal to 3?</span></span>
<span><span class="va">sample_numbers</span> <span class="op">&gt;=</span> <span class="fl">3</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE</span></span>
<span></span>
<span><span class="co">## base R: less than 3?</span></span>
<span><span class="va">sample_numbers</span> <span class="op">&lt;</span> <span class="fl">3</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE</span></span>
<span></span>
<span><span class="co">## base R: less than or equal to 3?</span></span>
<span><span class="va">sample_numbers</span> <span class="op">&lt;=</span> <span class="fl">3</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE</span></span></code></pre></div>
<p>Unfortunately, we cannot use <code>&lt;</code> or <code>&gt;</code>
in custom operators, so we use the substitutions: <code>g = &gt;</code>
and <code>l = &lt;</code> and <code>e = =</code>. So that
<code>ge = &lt;=</code> etc.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## extraoperators: greater than 3?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicals.html">%g%</a></span> <span class="fl">3</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE</span></span>
<span></span>
<span><span class="co">## extraoperators: greater than or equal to 3?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicals.html">%ge%</a></span> <span class="fl">3</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE</span></span>
<span></span>
<span><span class="co">## extraoperators: less than 3?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicals.html">%l%</a></span> <span class="fl">3</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE</span></span>
<span></span>
<span><span class="co">## extraoperators: less than or equal to 3?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicals.html">%le%</a></span> <span class="fl">3</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE</span></span></code></pre></div>
<p>So far there is no real gain in using <code>extraoperators</code> but
this changes for more complex operations. What if we want to know if our
values fall within some range? This is a fairly common task, such as
saying that valid ages must be between 0 and 100 years.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## base R: greater than 3 and less than 10?</span></span>
<span><span class="va">sample_numbers</span> <span class="op">&gt;</span> <span class="fl">3</span> <span class="op">&amp;</span> <span class="va">sample_numbers</span> <span class="op">&lt;</span> <span class="fl">10</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE</span></span>
<span></span>
<span><span class="co">## base R: greater than or equal to 3 and less than 10?</span></span>
<span><span class="va">sample_numbers</span> <span class="op">&gt;=</span> <span class="fl">3</span> <span class="op">&amp;</span> <span class="va">sample_numbers</span> <span class="op">&lt;</span> <span class="fl">10</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE  TRUE  TRUE FALSE FALSE</span></span>
<span></span>
<span><span class="co">## base R: greater than 3 and less than or equal to 10?</span></span>
<span><span class="va">sample_numbers</span> <span class="op">&gt;</span> <span class="fl">3</span> <span class="op">&amp;</span> <span class="va">sample_numbers</span> <span class="op">&lt;=</span> <span class="fl">10</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE</span></span>
<span></span>
<span><span class="co">## base R: greater than or equal to 3 and less than or equal to 10?</span></span>
<span><span class="va">sample_numbers</span> <span class="op">&gt;=</span> <span class="fl">3</span> <span class="op">&amp;</span> <span class="va">sample_numbers</span> <span class="op">&lt;=</span> <span class="fl">10</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE</span></span></code></pre></div>
<p>Base <code>R</code> accomplishes this through chaining of operations.
<code>extraoperators</code> has built in range operators.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## extraoperators: greater than 3 and less than 10?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicals.html">%gl%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE</span></span>
<span></span>
<span><span class="co">## extraoperators: greater than or equal to 3 and less than 10?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicals.html">%gel%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE  TRUE  TRUE FALSE FALSE</span></span>
<span></span>
<span><span class="co">## extraoperators: greater than 3 and less than or equal to 10?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicals.html">%gle%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE</span></span>
<span></span>
<span><span class="co">## extraoperators: greater than or equal to 3 and less than or equal to 10?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicals.html">%gele%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE</span></span></code></pre></div>
<p>Finally, <code>extraoperators</code> includes a <code>not in</code>
operator, <code>%!in%</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## base R: not in 3 or 10</span></span>
<span><span class="op">!</span><span class="va">sample_numbers</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE</span></span>
<span></span>
<span><span class="co">## extraoperators: not in 3 or 10</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicals.html">%!in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE</span></span></code></pre></div>
<p>The next sections show a few examples of these operators augmented by
prefixes: <code>?</code>, <code>s</code> and <code>a</code>.</p>
</div>
<div class="section level2">
<h2 id="indices-which-values">Indices (Which Values?)<a class="anchor" aria-label="anchor" href="#indices-which-values"></a>
</h2>
<p>Sometimes we want to use a logical comparison and identify indices,
such as to use in a loop. <code>extraoperators</code> does this by
prefixing operators with <code>?</code> for “which”.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## base R: what are the indices that match 3 and 10?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">sample_numbers</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4 6</span></span>
<span></span>
<span><span class="co">## extraoperators: what are the indices that match 3 and 10?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicalwhich.html">%?in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4 6</span></span>
<span></span>
<span><span class="co">## base R: what are the indices for numbers between 3 and 10?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">sample_numbers</span> <span class="op">&gt;</span> <span class="fl">3</span> <span class="op">&amp;</span> <span class="va">sample_numbers</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1 3 5</span></span>
<span></span>
<span><span class="co">## extraoperators: what are the indices for numbers between 3 and 10?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicalwhich.html">%?gl%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1 3 5</span></span></code></pre></div>
<p>This can be readily incorporated in other code for further
processing.</p>
</div>
<div class="section level2">
<h2 id="subsetting">Subsetting<a class="anchor" aria-label="anchor" href="#subsetting"></a>
</h2>
<p>Another fairly common task is selecting only certain observations.
For example, we might want to calculate the average of numbers within a
plausible range (e.g., excluding outliers). In
<code>extraoperators</code> subsetting is done by adding an
<code>s</code> prefix.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## base R: subset to only numbers between 3 and 10</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">sample_numbers</span>, <span class="va">sample_numbers</span> <span class="op">&gt;</span> <span class="fl">3</span> <span class="op">&amp;</span> <span class="va">sample_numbers</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6</span></span>
<span></span>
<span><span class="co">## or equivalently </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">sample_numbers</span><span class="op">[</span><span class="va">sample_numbers</span> <span class="op">&gt;</span> <span class="fl">3</span> <span class="op">&amp;</span> <span class="va">sample_numbers</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6</span></span>
<span></span>
<span><span class="co">## extraoperators: subset to only numbers between 3 and 10</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/subsetting.html">%sgl%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6</span></span></code></pre></div>
<p>Subsetting can be especially useful in quick exploratory analyses.
Graphs are easily hard to read if there are extreme values. Subsetting
makes it fast to “zoom in” on a specific range.</p>
</div>
<div class="section level2">
<h2 id="all-or-none">All (or None)<a class="anchor" aria-label="anchor" href="#all-or-none"></a>
</h2>
<p>Finally, you might have some quality controls in place for data. For
example asserting that all ages are between 0 and 100. In
<code>extraoperators</code> this is done by adding the prefix
<code>a</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## base R: are all numbers between 0 and 10?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">sample_numbers</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">sample_numbers</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span></span>
<span><span class="co">## extraoperators: are all numbers between 0 and 10?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicalall.html">%agl%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span></span>
<span><span class="co">## extraoperators: are all numbers between 0 and 100?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicalall.html">%agl%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>If you want to know the opposite, are no numbers between 0 and 100,
we can negate the whole operation.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## extraoperators: are NO numbers between 0 and 100?</span></span>
<span><span class="op">!</span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicalall.html">%agl%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span></span>
<span><span class="co">## extraoperators: are NO numbers between 55 and 60?</span></span>
<span><span class="op">!</span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicalall.html">%agl%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">55</span>, <span class="fl">60</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>There are also expanded all, subset, and which operators for equals
and not equals.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## extraoperators: are all values equal?</span></span>
<span><span class="va">sample_numbers</span> <span class="op"><a href="../reference/logicalall.html">%a==%</a></span> <span class="va">sample_numbers</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co">## extraoperators: are all values NOT equal?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="../reference/logicalall.html">%a!=%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="chaining">Chaining<a class="anchor" aria-label="anchor" href="#chaining"></a>
</h2>
<p>In language, it is fairly natural to make a statement like this: “In
my study, age should be between 18 to 65 and not be missing.” In
<code>R</code>, the usual implementation of this is more equivalent to:
“In my study, age should be greater than 18 and age should be less than
65 and age should not be missing.” <code>extraoperators</code> tries to
facilitate something closer to the cleaner original statement using the
chaining operator, <code>%c%</code>. The chaining operator chains a set
of operations on the right hand side with the argument on its left hand
side passed to each. To accomplish this, the right hand side must be
quoted.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19</span>, <span class="fl">30</span>, <span class="fl">90</span>, <span class="fl">50</span>, <span class="cn">NA</span>, <span class="fl">45</span><span class="op">)</span></span>
<span><span class="va">age</span> <span class="op"><a href="../reference/grapes-c-grapes.html">%c%</a></span> <span class="st">"(&gt; 18 &amp; &lt; 65) &amp; !is.na"</span></span>
<span><span class="co">#&gt; [1]  TRUE  TRUE FALSE  TRUE FALSE  TRUE</span></span></code></pre></div>
<p>Because the right hand side of the chaining operator is a character
string that is parsed, it is possible to do some special things in it.
<code>is.na</code>, <code>!is.na</code>, <code>is.nan</code>, and
<code>!is.nan</code> are special characters that do not require any
further value to work correctly. As shown, parentheses also work, which
allows fine grained control over exactly what is intended. For example
if we expect only adults are in the study, but those who refused to
report their age were coded -9 and people who failed to complete the
questionnaire at all are missing.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19</span>, <span class="fl">30</span>, <span class="fl">90</span>, <span class="fl">50</span>, <span class="cn">NA</span>, <span class="fl">16</span>, <span class="op">-</span><span class="fl">9</span><span class="op">)</span></span>
<span><span class="va">age</span> <span class="op"><a href="../reference/grapes-c-grapes.html">%c%</a></span> <span class="st">"(&gt; 18 | == -9) &amp; !is.na"</span></span>
<span><span class="co">#&gt; [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE</span></span></code></pre></div>
<p>As with all operators, there are prefixes for all, subset, and
which.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age</span> <span class="op"><a href="../reference/logicalall.html">%ac%</a></span> <span class="st">"(&gt; 18 | == -9) &amp; !is.na"</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span></span>
<span><span class="va">age</span> <span class="op"><a href="../reference/logicalall.html">%ac%</a></span> <span class="st">"&gt; -Inf"</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="va">age</span> <span class="op"><a href="../reference/logicalall.html">%ac%</a></span> <span class="st">"&gt; -Inf &amp; !is.na"</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="va">age</span> <span class="op"><a href="../reference/logicalall.html">%ac%</a></span> <span class="st">"&gt; -Inf | is.na"</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="va">age</span> <span class="op"><a href="../reference/subsetting.html">%sc%</a></span> <span class="st">"(&gt; 18 | == -9) &amp; !is.na"</span></span>
<span><span class="co">#&gt; [1] 19 30 90 50 -9</span></span>
<span></span>
<span><span class="va">age</span> <span class="op"><a href="../reference/logicalwhich.html">%?c%</a></span> <span class="st">"(&gt; 18 | == -9) &amp; !is.na"</span></span>
<span><span class="co">#&gt; [1] 1 2 3 4 7</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="interval-notation-operator">Interval Notation Operator<a class="anchor" aria-label="anchor" href="#interval-notation-operator"></a>
</h2>
<p>In math, interval notation often is used. For example, we might
write: <span class="math inline">\(x \in (1, 5) \cup [6,
\infty)\)</span> to indicate that <em>x</em> is between the intervals 1
to 5 (not including 1 or 5) or between 6 and positive infinity,
including 6 but not positive infinity. The interval notation operator,
<code>%e%</code> let’s you use fairly similar language in
<code>R</code>. “|” is the union operator and “&amp;” is the intersect
operator. Variables are allowed but no functions as these cannot be
parsed.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">6</span>, <span class="fl">300</span><span class="op">)</span> <span class="op"><a href="../reference/grapes-e-grapes.html">%e%</a></span> <span class="st">"(1, 5) | [6, Inf)"</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE  TRUE  TRUE</span></span>
<span></span>
<span><span class="co">## this is OK</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">6</span>, <span class="fl">300</span><span class="op">)</span> <span class="op"><a href="../reference/grapes-e-grapes.html">%e%</a></span> <span class="st">"(1, 5) | [6, x)"</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE  TRUE FALSE</span></span>
<span></span>
<span><span class="co">## ## this would NOT be OK</span></span>
<span><span class="co">## c(1, 2, 6, 300) %e% "(1, 5) | [6, max(mtcars$mpg))"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="regular-expressions">Regular Expressions<a class="anchor" aria-label="anchor" href="#regular-expressions"></a>
</h2>
<p>Sometimes you want to pattern match. For example, you might want to
find all variable names that match a certain pattern. The
<code>%grepl% operator can help here, built off</code>R<code>'s</code>grepl`
function.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## sample dataset</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  cesd_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  cesd_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span><span class="op">)</span>,</span>
<span>  cesd_total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11</span>, <span class="fl">13</span>, <span class="fl">15</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## find all variables that start with "cesd"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^cesd"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "cesd_1"     "cesd_2"     "cesd_total"</span></span>
<span></span>
<span><span class="co">## or equivalently using grep() with right options</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^cesd"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "cesd_1"     "cesd_2"     "cesd_total"</span></span>
<span></span>
<span><span class="co">## here is the operator version</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op"><a href="../reference/subsetting.html">%sgrepl%</a></span> <span class="st">"^cesd"</span></span>
<span><span class="co">#&gt; [1] "cesd_1"     "cesd_2"     "cesd_total"</span></span>
<span></span>
<span><span class="co">## the operator opens up all standard variations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op"><a href="../reference/logicalwhich.html">%?grepl%</a></span> <span class="st">"^cesd"</span> <span class="co">## indices</span></span>
<span><span class="co">#&gt; [1] 2 3 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op"><a href="../reference/subsetting.html">%s!grepl%</a></span> <span class="st">"^cesd"</span> <span class="co">## subset names not in pattern</span></span>
<span><span class="co">#&gt; [1] "ID"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op"><a href="../reference/logicalall.html">%agrepl%</a></span> <span class="st">"^cesd"</span> <span class="co">## do all match the pattern?</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>An example use case in practice might be to find all variables that
are items in a scale and then calculate the scale score.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span> <span class="co"># Set seed for reproducibility</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"cesd_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## find all variables that start with "cesd" and end with a number</span></span>
<span><span class="co">## use these to sum all the items for the scale score</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">cesd_total</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op"><a href="../reference/subsetting.html">%sgrepl%</a></span> <span class="st">"^cesd.*[0-9]$"</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">cesd_total</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;    12.0    18.0    19.0    19.3    20.5    25.0</span></span></code></pre></div>
<p>Another example is you load a larger dataset from someone and want to
check whether there are any variable names including spaces. You want to
check that any space, in regular expression captured by “\s”, is not
contained in any variable name. That is all are not in space.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op"><a href="../reference/logicalall.html">%a!grepl%</a></span> <span class="st">"\\s"</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>This returns <code>TRUE</code> indicating no variable names have a
space in them.</p>
<p>Here is an example that fails. At least one variable name has a
space. We follow it up by finding out <em>which</em> variable(s). This
could be fed back to the data owners to change, if desired. Lastly,
although these are written as separate codes, when used interactively,
one might start with the test and if it fails change the <code>a!</code>
to <code>s</code> to find the variables. The intention being just to
slightly ease and speed up the process.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,</span>
<span>  `b c` <span class="op">=</span> <span class="fl">5</span><span class="op">:</span><span class="fl">8</span>, check.names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op"><a href="../reference/logicalall.html">%a!grepl%</a></span> <span class="st">"\\s"</span> <span class="co"># this fails</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span></span>
<span><span class="co"># which variables have spaces?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op"><a href="../reference/subsetting.html">%sgrepl%</a></span> <span class="st">"\\s"</span> </span>
<span><span class="co">#&gt; [1] "b c"</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://joshuawiley.com" class="external-link">Joshua F. Wiley</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
